<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Africcase 🎨</title>

    <!-- Favicon -->
    <link href="{{ url_for('static', filename='img/favicon.ico') }}" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{{ url_for('static', filename='lib/animate/animate.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='lib/owlcarousel/assets/owl.carousel.min.css') }}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script>

    <!-- Custom CSS -->
    <style>
        /* General Styles */
        body {
            font-family: 'Heebo', sans-serif;
            color: #333;
            background-color: #f8f9fa;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Nunito', sans-serif;
        }
        
        .section-title {
            position: relative;
            display: inline-block;
        }
        
        .section-title::before {
            position: absolute;
            content: "";
            width: 45px;
            height: 2px;
            top: 50%;
            left: -55px;
            margin-top: -1px;
            background: #06BBCC;
        }
        
        .section-title::after {
            position: absolute;
            content: "";
            width: 45px;
            height: 2px;
            top: 50%;
            right: -55px;
            margin-top: -1px;
            background: #06BBCC;
        }
        
        .section-title.text-start::before,
        .section-title.text-end::after {
            display: none;
        }
        
        /* Navbar Styles */
        .navbar-light .navbar-nav .nav-link {
            padding: 10px 15px;
            color: #333;
            font-weight: 500;
            outline: none;
        }
        
        .navbar-light .navbar-nav .nav-link:hover,
        .navbar-light .navbar-nav .nav-link.active {
            color: #06BBCC;
        }
        
        /* Hero Section */
        .hero-section {
            background: linear-gradient(rgba(24, 29, 56, 0.7), rgba(24, 29, 56, 0.7)), url('{{ url_for("static", filename="img/course-1.jpg") }}');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            padding: 100px 0;
            color: white;
        }
        
        .hero-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 20px;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        /* Dashboard Cards */
        .dashboard-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .dashboard-card h5, 
        .dashboard-card h6 {
            color: #06BBCC;
        }
        
        /* Points Display */
        .points-display {
            background: white;
            color: #06BBCC;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .points-display i {
            margin-right: 10px;
        }
        
        /* Progress Bar */
        .progress-container {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #06BBCC, #06BBCC 100%);
            transition: width 0.5s ease;
        }
        
        /* Badges */
        .badge-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .badge-item {
            background: #f0f1ff;
            color: #06BBCC;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
        }
        
        .badge-item i {
            margin-right: 5px;
            font-size: 0.9rem;
        }
        
        /* Leaderboard */
        .leaderboard-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
        }
        
        .leaderboard-table th {
            background: #06BBCC;
            color: white;
            padding: 10px;
            text-align: left;
        }
        
        .leaderboard-table td {
            padding: 10px;
            background: white;
            border-bottom: 1px solid #eee;
        }
        
        .leaderboard-table tr.rank-1 td {
            border-left: 3px solid gold;
        }
        
        .leaderboard-table tr.rank-2 td {
            border-left: 3px solid silver;
        }
        
        .leaderboard-table tr.rank-3 td {
            border-left: 3px solid #cd7f32; /* bronze */
        }
        
        .rank-icon {
            color: #06BBCC;
        }
        
        /* Content Sections */
        .content-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .section-title {
            color: #06BBCC;
            margin-bottom: 20px;
        }
        
        /* Drawing Canvas */
        #drawingCanvas {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            display: block;
            background: white;
        }
        
        /* Tool Buttons */
        .btn-tool {
            background: #f0f1ff;
            border: none;
            color: #06BBCC;
            padding: 8px 15px;
            border-radius: 5px;
            margin-right: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-tool:hover {
            background: #06BBCC;
            color: white;
        }
        
        .btn-tool.active {
            background: #06BBCC;
            color: white;
        }
        
        /* Notepad */
        #notepadText {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: none;
            font-family: inherit;
        }
        
        /* Challenges Table */
        .challenges-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
        }
        
        .challenges-table th {
            background: #06BBCC;
            color: white;
            padding: 10px;
            text-align: left;
        }
        
        .challenges-table td {
            padding: 10px;
            background: white;
            border-bottom: 1px solid #eee;
        }
        
        /* Drawing Game Elements */
        .drawing-game-container {
            position: relative;
        }
        
        .drawing-game-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 10;
            border-radius: 5px;
        }
        
        .drawing-game-instruction {
            font-size: 1.2rem;
            margin-bottom: 20px;
            text-align: center;
            padding: 0 20px;
        }
        
        .drawing-game-timer {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .drawing-game-score {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
        }
        
        /* Footer */
        .footer {
            background: #1a1a1a;
            color: white;
        }
        
        .footer a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer a:hover {
            color: #06BBCC;
        }
        
        .footer .btn-social {
            width: 40px;
            height: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        /* Animations */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            #drawingCanvas {
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg navbar-light shadow sticky-top p-0">
        <div class="container">
            <a href="" class="navbar-brand d-flex align-items-center">
                <h2 class="m-0 text-primary"><i class="fas fa-palette me-2"></i>Africcase</h2>
            </a>
            <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto p-4 p-lg-0">
                    <a href="" class="nav-item nav-link active"></a>
                    <a href="" class="nav-item nav-link"></a>
                    <a href="" class="nav-item nav-link"></a>
                    <a href="" class="nav-item nav-link"></a>
                </div>
                <div class="d-flex align-items-center ms-3">
                    <div class="dropdown">
                        <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="https://ui-avatars.com/api/?name={{ user_data.username }}&background=6c63ff&color=fff" alt="User" width="40" height="40" class="rounded-circle me-2">
                            <span class="d-none d-lg-inline">{{ user_data.username }}</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="dropdownUser">
                            <div class="collapse navbar-collapse" id="navbarCollapse">
                                <div class="navbar-nav ms-auto p-4 p-lg-0">
                                    <a href="/profile" class="nav-item nav-link"><i class="fas fa-user me-2"></i>My Profile</a>
                                </div>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container text-center py-5">
            <h1 class="hero-title">Unleash Your Creativity</h1>
            <p class="hero-subtitle">Explore your artistic potential with our gamified creative tools. Draw, record, write, and earn rewards!</p>
            
            <div class="points-display floating">
                <i class="fas fa-coins"></i>
                <span id="totalPoints">Total Points: {{ user_data.points if user_data.points else 0 }}</span>
            </div>
            
            <div class="progress-container mx-auto" style="max-width: 400px;">
                <div class="progress-bar" style="width: {{ (user_data.points % 1000) / 10 if user_data.points else 0 }}%;"></div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container py-5">
        <div class="row">
            <div class="col-lg-4">
                <!-- User Profile Card -->
                <div class="dashboard-card mb-4">
                    <div class="d-flex align-items-center mb-4">
                        <img src="https://ui-avatars.com/api/?name={{ user_data.username }}&background=6c63ff&color=fff" alt="User" width="80" height="80" class="rounded-circle me-3">
                        <div>
                            <h5 class="mb-1">{{ user_data.username }}</h5>
                            <p class="text-muted mb-0">Creative Explorer</p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6 class="card-title">Your Badges</h6>
                        <div id="badgeList" class="badge-container">
                            {% if user_data.points >= 100 %}
                            <div class="badge-item">
                                <i class="fas fa-award"></i>
                                First Drawing
                            </div>
                            {% endif %}
                            {% if user_data.points >= 500 %}
                            <div class="badge-item">
                                <i class="fas fa-award"></i>
                                Master Artist
                            </div>
                            {% endif %}
                            {% if user_data.points >= 1000 %}
                            <div class="badge-item">
                                <i class="fas fa-award"></i>
                                Creative Guru
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div>
                        <h6 class="card-title">Quick Stats</h6>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Drawings</span>
                            <span>{{ user_data.drawing_count if user_data.drawing_count else 0 }}</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Recordings</span>
                            <span>{{ user_data.recording_count if user_data.recording_count else 0 }}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Writings</span>
                            <span>{{ user_data.writing_count if user_data.writing_count else 0 }}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Leaderboard Card -->
                <div class="dashboard-card">
                    <h6 class="card-title">🏆 Leaderboard</h6>
                    <div class="table-responsive">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>User</th>
                                    <th>Points</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for player in leaderboard_data %}
                                <tr class="rank-{{ loop.index }}">
                                    <td>
                                        <span class="rank-icon">
                                            {% if loop.index == 1 %}<i class="fas fa-trophy"></i>
                                            {% elif loop.index == 2 %}<i class="fas fa-medal"></i>
                                            {% elif loop.index == 3 %}<i class="fas fa-award"></i>
                                            {% else %}{{ loop.index }}{% endif %}
                                        </span>
                                    </td>
                                    <td>
                                        {% if loop.index <= 3 %}
                                        <strong>{{ player.username }}</strong>
                                        {% else %}
                                        {{ player.username }}
                                        {% endif %}
                                    </td>
                                    <td>{{ player.score }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-8">
                <!-- Tools Navigation -->
                <ul class="nav nav-tabs" id="creativeTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="drawing-tab" data-bs-toggle="tab" data-bs-target="#drawing" type="button" role="tab" aria-controls="drawing" aria-selected="true">
                            <i class="fas fa-paint-brush"></i> Drawing
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="voice-tab" data-bs-toggle="tab" data-bs-target="#voice" type="button" role="tab" aria-controls="voice" aria-selected="false">
                            <i class="fas fa-microphone"></i> Voice
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="video-tab" data-bs-toggle="tab" data-bs-target="#video" type="button" role="tab" aria-controls="video" aria-selected="false">
                            <i class="fas fa-video"></i> Video
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="notepad-tab" data-bs-toggle="tab" data-bs-target="#notepad" type="button" role="tab" aria-controls="notepad" aria-selected="false">
                            <i class="fas fa-edit"></i> Notepad
                        </button>
                    </li>
                </ul>
                
                <!-- Tab Content -->
                <div class="tab-content" id="creativeTabsContent">
                    <!-- Drawing Tab -->
                    <div class="tab-pane fade show active" id="drawing" role="tabpanel" aria-labelledby="drawing-tab">
                        <div class="content-section">
                            <h3 class="section-title"><i class="fas fa-paint-brush"></i> Drawing Board</h3>
                            <p>Draw freely or try to match the given object to earn points!</p>
                            
                            <div class="mode-toggle mb-4">
                                <button id="freeDrawMode" class="btn-tool active">
                                    <i class="fas fa-pencil-alt"></i> Free Draw
                                </button>
                                <button id="objectGameMode" class="btn-tool">
                                    <i class="fas fa-gamepad"></i> Drawing Game
                                </button>
                            </div>
                            
                            <div class="drawing-game-container">
                                <canvas id="drawingCanvas" width="700" height="500"></canvas>
                                <div id="gameOverlay" class="drawing-game-overlay" style="display: none;">
                                    <div class="drawing-game-instruction" id="gameInstruction"></div>
                                    <div class="drawing-game-timer" id="gameTimer">3</div>
                                    <button id="startGameBtn" class="btn btn-primary">Start Challenge</button>
                                </div>
                                <div id="gameScore" class="drawing-game-score" style="display: none;">Score: 0</div>
                            </div>
                            
                            <div class="tool-group">
                                <button id="clearCanvas" class="btn-tool">
                                    <i class="fas fa-trash-alt"></i> Clear
                                </button>
                                <button id="eraser" class="btn-tool">
                                    <i class="fas fa-eraser"></i> Eraser
                                </button>
                                <input type="color" id="colorPicker" value="#000000" class="btn-tool" style="padding: 0; height: 38px;">
                                <input type="range" id="brushSize" min="1" max="50" value="5" class="btn-tool" style="width: 100px;">
                                <button id="takePicture" class="btn-tool">
                                    <i class="fas fa-camera"></i> Save
                                </button>
                                <button id="submitDrawing" class="btn-tool bg-success text-white">
                                    <i class="fas fa-paper-plane"></i> Submit
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Voice Tab -->
                    <div class="tab-pane fade" id="voice" role="tabpanel" aria-labelledby="voice-tab">
                        <div class="content-section">
                            <h3 class="section-title"><i class="fas fa-microphone"></i> Voice Recording</h3>
                            <p>Lip-sync the given song to earn points!</p>
                            
                            <div class="button-group mb-4">
                                <button id="startRecord" class="btn btn-primary me-2">
                                    <i class="fas fa-microphone"></i> Start Recording
                                </button>
                                <button id="stopRecord" class="btn btn-danger" disabled>
                                    <i class="fas fa-stop"></i> Stop Recording
                                </button>
                            </div>
                            
                            <audio id="audioPlayback" controls></audio>
                            
                            <button id="submitVoice" class="btn btn-success mt-3">
                                <i class="fas fa-paper-plane"></i> Submit Recording
                            </button>
                        </div>
                    </div>
                    
                    <!-- Video Tab -->
                    <div class="tab-pane fade" id="video" role="tabpanel" aria-labelledby="video-tab">
                        <div class="content-section">
                            <h3 class="section-title"><i class="fas fa-video"></i> Video Recording</h3>
                            <p>Complete the dance challenge to earn points!</p>
                            
                            <div class="button-group mb-4">
                                <button id="startVideoRecord" class="btn btn-primary me-2">
                                    <i class="fas fa-video"></i> Start Recording
                                </button>
                                <button id="stopVideoRecord" class="btn btn-danger" disabled>
                                    <i class="fas fa-stop"></i> Stop Recording
                                </button>
                            </div>
                            
                            <video id="videoPreview" controls></video>
                            
                            <button id="submitVideo" class="btn btn-success mt-3">
                                <i class="fas fa-paper-plane"></i> Submit Video
                            </button>
                        </div>
                    </div>
                    
                    <!-- Notepad Tab -->
                    <div class="tab-pane fade" id="notepad" role="tabpanel" aria-labelledby="notepad-tab">
                        <div class="content-section">
                            <h3 class="section-title"><i class="fas fa-edit"></i> Creative Notepad</h3>
                            <p>Write your poetry, stories, or thoughts to earn points!</p>
                            
                            <textarea id="notepadText" placeholder="Write your creative content here...">{{ saved_note if saved_note }}</textarea>
                            
                            <div class="notepad-tools mt-3">
                                <button id="saveNote" class="btn btn-secondary me-2">
                                    <i class="fas fa-save"></i> Save
                                </button>
                                <button id="clearNote" class="btn btn-secondary me-2">
                                    <i class="fas fa-trash-alt"></i> Clear
                                </button>
                                <button id="submitNote" class="btn btn-success">
                                    <i class="fas fa-paper-plane"></i> Submit
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Challenges Section -->
                <div class="content-section mt-4">
                    <h3 class="section-title"><i class="fas fa-tasks"></i> Current Challenges</h3>
                    
                    <div class="table-responsive">
                        <table class="challenges-table">
                            <thead>
                                <tr>
                                    <th>Challenge</th>
                                    <th>Description</th>
                                    <th>Deadline</th>
                                    <th>Reward</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for challenge in challenges %}
                                <tr>
                                    <td><strong>{{ challenge.name }}</strong></td>
                                    <td>{{ challenge.description }}</td>
                                    <td>{{ challenge.deadline }}</td>
                                    <td><span class="badge bg-warning text-dark">{{ challenge.points_reward }} pts</span></td>
                                </tr>
                                {% else %}
                                <tr>
                                    <td colspan="4" class="text-center">No challenges available at the moment.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Back to Dashboard -->
    <div class="text-center mt-5">
        <a href="{{ url_for('art_challenges') if username in ['smuggerteey', 'cicada403'] else ('art_challenges' if user_data['role'] == 'Artist' else 'art_challenges') }}" 
           class="btn btn-secondary dashboard-btn">
            Go Back
        </a>
    </div>

    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-3">Quick Link</h4>
                    <a class="btn btn-link" href="">About Us</a>
                    <a class="btn btn-link" href="">Contact Us</a>
                    <a class="btn btn-link" href="">Privacy Policy</a>
                    <a class="btn btn-link" href="">Terms & Condition</a>
                    <a class="btn btn-link" href="">FAQs & Help</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-3">Contact</h4>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>1 Avenue, Brekuso, ER, Ghana</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+233203419613</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>infor@creativeshowcase.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-3">Gallery</h4>
                    <div class="row g-2 pt-2">
                        <div class="col-4">
                            <img class="img-fluid bg-light p-1" src="{{ url_for('static', filename='img/course-1.jpg') }}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid bg-light p-1" src="{{ url_for('static', filename='img/course-2.jpg') }}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid bg-light p-1" src="{{ url_for('static', filename='img/course-3.jpg') }}" alt="">
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-white mb-3">Newsletter</h4>
                    <p>Sign Up For News.</p>
                    <div class="position-relative mx-auto" style="max-width: 400px;">
                        <input class="form-control border-0 w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                        <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">Africcase</a>, All Right Reserved.
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="">Home</a>
                            <a href="">Cookies</a>
                            <a href="">Help</a>
                            <a href="">FQAs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='lib/wow/wow.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/easing/easing.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/waypoints/waypoints.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/owlcarousel/owl.carousel.min.js') }}"></script>

    <!-- Template Javascript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    <script>
        // Initialize with user data from server
        let totalPoints = {{ user_data.points if user_data.points else 0 }};
        let leaderboard = {{ leaderboard_data|tojson|safe }};
        let badges = [];
        
        // Drawing game variables
        let currentMode = 'free';
        let gameActive = false;
        let gameScore = 0;
        let gameTimer = null;
        let gameTimeLeft = 60; // 60 seconds for the game
        let targetObject = null;
        let drawingHistory = [];
        let similarityThreshold = 0.7; // How close the drawing needs to be to the target
        
        // Drawing game challenges
        const drawingChallenges = [
            {
                name: "Simple Shapes",
                instructions: "Draw a perfect circle in the center of the canvas",
                target: "circle",
                points: 30,
                difficulty: "easy"
            },
            {
                name: "House Drawing",
                instructions: "Draw a simple house with a roof, door and window",
                target: "house",
                points: 50,
                difficulty: "medium"
            },
            {
                name: "Animal Challenge",
                instructions: "Draw a cat with pointy ears and whiskers",
                target: "cat",
                points: 70,
                difficulty: "hard"
            },
            {
                name: "Self Portrait",
                instructions: "Draw a simple face with eyes, nose and mouth",
                target: "face",
                points: 100,
                difficulty: "expert"
            }
        ];

        // Initialize the drawing board
        function initDrawingBoard() {
            const canvas = new fabric.Canvas('drawingCanvas', {
                isDrawingMode: true,
                backgroundColor: '#ffffff'
            });
            
            canvas.freeDrawingBrush.color = '#000000';
            canvas.freeDrawingBrush.width = 5;

            document.getElementById('colorPicker').addEventListener('change', (e) => {
                canvas.freeDrawingBrush.color = e.target.value;
            });

            document.getElementById('brushSize').addEventListener('input', (e) => {
                canvas.freeDrawingBrush.width = parseInt(e.target.value, 10);
            });

            document.getElementById('clearCanvas').addEventListener('click', () => {
                canvas.clear();
                canvas.backgroundColor = '#ffffff';
                canvas.renderAll();
            });

            document.getElementById('eraser').addEventListener('click', () => {
                canvas.freeDrawingBrush.color = '#ffffff';
            });

            document.getElementById('takePicture').addEventListener('click', () => {
                const image = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.href = image;
                link.download = 'creative-hub-drawing.png';
                link.click();
            });

            document.getElementById('submitDrawing').addEventListener('click', () => {
                if (canvas.isEmpty()) {
                    Swal.fire({
                        title: 'Empty Canvas',
                        text: 'Please draw something before submitting!',
                        icon: 'warning'
                    });
                    return;
                }
                
                const points = currentMode === 'free' ? 20 : gameScore;
                
                // Save the drawing to the server
                const imageData = canvas.toDataURL('image/png');
                
                fetch('/save_drawing', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ 
                        username: '{{ user_data.username }}',
                        image_data: imageData,
                        points: points,
                        mode: currentMode
                    }),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire({
                            title: 'Drawing Submitted!',
                            text: `You've earned ${points} points!`,
                            icon: 'success',
                            confirmButtonText: 'Awesome!'
                        });
                        updatePoints(points);
                        
                        // Update the drawing count display
                        const drawingCountElement = document.querySelector('.dashboard-card div:nth-child(3) div:nth-child(1) span:nth-child(2)');
                        if (drawingCountElement) {
                            const currentCount = parseInt(drawingCountElement.textContent) || 0;
                            drawingCountElement.textContent = currentCount + 1;
                        }
                    } else {
                        Swal.fire({
                            title: 'Error',
                            text: 'Failed to save drawing: ' + data.error,
                            icon: 'error'
                        });
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    Swal.fire({
                        title: 'Error',
                        text: 'Failed to save drawing',
                        icon: 'error'
                    });
                });
            });

            // Mode toggle
            document.getElementById('freeDrawMode').addEventListener('click', function() {
                if (gameActive) {
                    Swal.fire({
                        title: 'Game in Progress',
                        text: 'Please finish or cancel the current game first',
                        icon: 'warning'
                    });
                    return;
                }
                
                currentMode = 'free';
                this.classList.add('active');
                document.getElementById('objectGameMode').classList.remove('active');
                canvas.isDrawingMode = true;
                document.getElementById('gameOverlay').style.display = 'none';
                document.getElementById('gameScore').style.display = 'none';
                
                // Clear canvas
                canvas.clear();
                canvas.backgroundColor = '#ffffff';
                canvas.renderAll();
            });

            document.getElementById('objectGameMode').addEventListener('click', function() {
                currentMode = 'game';
                this.classList.add('active');
                document.getElementById('freeDrawMode').classList.remove('active');
                canvas.isDrawingMode = false;
                
                // Show game overlay
                const overlay = document.getElementById('gameOverlay');
                overlay.style.display = 'flex';
                
                // Select a random challenge
                const challenge = drawingChallenges[Math.floor(Math.random() * drawingChallenges.length)];
                document.getElementById('gameInstruction').textContent = challenge.instructions;
                targetObject = challenge.target;
                
                // Reset game state
                gameScore = 0;
                gameTimeLeft = 60;
                document.getElementById('gameScore').textContent = `Score: ${gameScore}`;
                document.getElementById('gameTimer').textContent = gameTimeLeft;
                
                // Clear canvas
                canvas.clear();
                canvas.backgroundColor = '#ffffff';
                canvas.renderAll();
            });

            // Start game button
            document.getElementById('startGameBtn').addEventListener('click', function() {
                const overlay = document.getElementById('gameOverlay');
                overlay.style.display = 'none';
                document.getElementById('gameScore').style.display = 'block';
                
                // Start the game timer
                gameTimer = setInterval(() => {
                    gameTimeLeft--;
                    document.getElementById('gameTimer').textContent = gameTimeLeft;
                    
                    if (gameTimeLeft <= 0) {
                        endDrawingGame();
                    }
                }, 1000);
                
                // Enable drawing
                canvas.isDrawingMode = true;
                gameActive = true;
                
                // Start checking for drawing similarity periodically
                setInterval(() => {
                    if (gameActive) {
                        checkDrawingSimilarity(canvas, targetObject);
                    }
                }, 3000);
            });

            // Function to check how close the drawing is to the target
            function checkDrawingSimilarity(canvas, target) {
                if (!gameActive || canvas.isEmpty()) return;
                
                // This is a simplified version - in a real app you'd use more advanced image comparison
                let similarityScore = 0;
                
                // For demo purposes, we'll just give random scores based on some simple checks
                const objects = canvas.getObjects();
                
                if (target === 'circle') {
                    // Check if there's a roughly circular shape
                    objects.forEach(obj => {
                        if (obj.type === 'circle' || 
                            (obj.type === 'path' && obj.path.length > 10 && isRoughlyCircular(obj))) {
                            similarityScore = 0.8 + Math.random() * 0.2;
                        }
                    });
                } else if (target === 'house') {
                    // Check for rectangular shapes with a triangular roof
                    const hasRect = objects.some(obj => obj.type === 'rect' || isRoughlyRectangular(obj));
                    const hasTriangle = objects.some(obj => isRoughlyTriangular(obj));
                    
                    if (hasRect && hasTriangle) {
                        similarityScore = 0.7 + Math.random() * 0.3;
                    }
                } else if (target === 'cat') {
                    // Check for pointy ears and whiskers
                    const hasPointyShapes = objects.some(obj => isPointy(obj));
                    if (hasPointyShapes) {
                        similarityScore = 0.6 + Math.random() * 0.4;
                    }
                } else if (target === 'face') {
                    // Check for facial features
                    const hasEyes = objects.filter(obj => isSmallAndRound(obj)).length >= 2;
                    const hasMouth = objects.some(obj => isMouthLike(obj));
                    
                    if (hasEyes && hasMouth) {
                        similarityScore = 0.7 + Math.random() * 0.3;
                    }
                }
                
                // Update score if similarity is good enough
                if (similarityScore > similarityThreshold) {
                    const pointsEarned = Math.floor(similarityScore * 20);
                    gameScore += pointsEarned;
                    document.getElementById('gameScore').textContent = `Score: ${gameScore}`;
                    
                    // Show a mini notification
                    const notification = document.createElement('div');
                    notification.className = 'position-absolute top-0 start-50 translate-middle-x mt-2 p-2 bg-success text-white rounded';
                    notification.style.zIndex = '1000';
                    notification.textContent = `+${pointsEarned} points!`;
                    document.querySelector('.drawing-game-container').appendChild(notification);
                    
                    setTimeout(() => {
                        notification.remove();
                    }, 2000);
                }
            }

            function endDrawingGame() {
                clearInterval(gameTimer);
                gameActive = false;
                canvas.isDrawingMode = false;
                
                Swal.fire({
                    title: 'Time\'s Up!',
                    html: `You scored <strong>${gameScore}</strong> points in this round!<br><br>
                           Submit your drawing to claim your points.`,
                    icon: 'info',
                    confirmButtonText: 'OK'
                });
            }

            // Helper functions for shape detection (simplified for demo)
            function isRoughlyCircular(obj) {
                // Simplified check - in real app use more advanced geometry
                return obj.width && obj.height && 
                       Math.abs(obj.width - obj.height) < Math.max(obj.width, obj.height) * 0.2;
            }

            function isRoughlyRectangular(obj) {
                return obj.type === 'rect' || 
                      (obj.type === 'path' && obj.path.length === 4);
            }

            function isRoughlyTriangular(obj) {
                return obj.type === 'triangle' || 
                      (obj.type === 'path' && obj.path.length === 3);
            }

            function isPointy(obj) {
                // Check for paths with sharp angles
                if (obj.type === 'path') {
                    return obj.path.some((p, i, arr) => {
                        if (i > 0 && i < arr.length - 1) {
                            const angle = calculateAngle(arr[i-1], p, arr[i+1]);
                            return angle < 60; // Sharp angle
                        }
                        return false;
                    });
                }
                return false;
            }

            function isSmallAndRound(obj) {
                return (obj.width < 50 && obj.height < 50) && isRoughlyCircular(obj);
            }

            function isMouthLike(obj) {
                return (obj.type === 'path' && obj.path.length > 3) || 
                       (obj.type === 'line' && obj.width > 30);
            }

            function calculateAngle(p1, p2, p3) {
                // Calculate angle between three points
                const v1 = { x: p1.x - p2.x, y: p1.y - p2.y };
                const v2 = { x: p3.x - p2.x, y: p3.y - p2.y };
                const dot = v1.x * v2.x + v1.y * v2.y;
                const mag1 = Math.sqrt(v1.x * v1.x + v1.y * v1.y);
                const mag2 = Math.sqrt(v2.x * v2.x + v2.y * v2.y);
                const angle = Math.acos(dot / (mag1 * mag2)) * (180 / Math.PI);
                return angle;
            }
        }

        // Initialize Voice Recording
        function initVoiceRecording() {
            let audioRecorder;
            let audioChunks = [];

            document.getElementById('startRecord').addEventListener('click', async () => {
                try {
                    audioChunks = [];
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    audioRecorder = new MediaRecorder(stream);
                    audioRecorder.ondataavailable = event => audioChunks.push(event.data);
                    audioRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                        document.getElementById('audioPlayback').src = URL.createObjectURL(audioBlob);
                    };
                    audioRecorder.start();
                    document.getElementById('stopRecord').disabled = false;
                    document.getElementById('startRecord').disabled = true;
                    
                } catch (error) {
                    Swal.fire({
                        title: 'Error',
                        text: "Couldn't access microphone. Please ensure permissions are granted.",
                        icon: 'error'
                    });
                }
            });

            document.getElementById('stopRecord').addEventListener('click', () => {
                audioRecorder.stop();
                audioRecorder.stream.getTracks().forEach(track => track.stop());
                document.getElementById('stopRecord').disabled = true;
                document.getElementById('startRecord').disabled = false;
                Swal.close();
            });

            document.getElementById('submitVoice').addEventListener('click', () => {
                if (audioChunks.length === 0) {
                    Swal.fire({
                        title: 'No Recording',
                        text: 'Please record something before submitting.',
                        icon: 'warning'
                    });
                    return;
                }
                
                // Create FormData to send the audio file
                const formData = new FormData();
                const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                formData.append('audio', audioBlob, 'recording.wav');
                formData.append('username', '{{ user_data.username }}');
                
                fetch('/save_recording', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire({
                            title: 'Recording Submitted!',
                            text: 'You earn 50 points!',
                            icon: 'success'
                        });
                        updatePoints(50);
                        
                        // Update the recording count display
                        const recordingCountElement = document.querySelector('.dashboard-card div:nth-child(3) div:nth-child(2) span:nth-child(2)');
                        if (recordingCountElement) {
                            const currentCount = parseInt(recordingCountElement.textContent) || 0;
                            recordingCountElement.textContent = currentCount + 1;
                        }
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    Swal.fire({
                        title: 'Error',
                        text: 'Failed to save recording',
                        icon: 'error'
                    });
                });
            });
        }

        // Initialize Video Recording
        function initVideoRecording() {
            let videoRecorder;
            let videoChunks = [];

            document.getElementById('startVideoRecord').addEventListener('click', async () => {
                try {
                    videoChunks = [];
                    const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                    document.getElementById('videoPreview').srcObject = stream;
                    videoRecorder = new MediaRecorder(stream);
                    videoRecorder.ondataavailable = event => videoChunks.push(event.data);
                    videoRecorder.onstop = () => {
                        const videoBlob = new Blob(videoChunks, { type: 'video/mp4' });
                        document.getElementById('videoPreview').src = URL.createObjectURL(videoBlob);
                        document.getElementById('videoPreview').srcObject = null;
                    };
                    videoRecorder.start();
                    document.getElementById('stopVideoRecord').disabled = false;
                    document.getElementById('startVideoRecord').disabled = true;
                    
                } catch (error) {
                    Swal.fire({
                        title: 'Error',
                        text: "Couldn't access camera. Please ensure permissions are granted.",
                        icon: 'error'
                    });
                }
            });

            document.getElementById('stopVideoRecord').addEventListener('click', () => {
                videoRecorder.stop();
                videoRecorder.stream.getTracks().forEach(track => track.stop());
                document.getElementById('stopVideoRecord').disabled = true;
                document.getElementById('startVideoRecord').disabled = false;
                Swal.close();
            });

            document.getElementById('submitVideo').addEventListener('click', () => {
                if (videoChunks.length === 0) {
                    Swal.fire({
                        title: 'No Video',
                        text: 'Please record something before submitting.',
                        icon: 'warning'
                    });
                    return;
                }
                
                // Create FormData to send the video file
                const formData = new FormData();
                const videoBlob = new Blob(videoChunks, { type: 'video/mp4' });
                formData.append('video', videoBlob, 'recording.mp4');
                formData.append('username', '{{ user_data.username }}');
                
                fetch('/save_video', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire({
                            title: 'Video Submitted!',
                            text: 'You earn 50 points!',
                            icon: 'success'
                        });
                        updatePoints(50);
                        
                        // Update the video count display
                        const videoCountElement = document.querySelector('.dashboard-card div:nth-child(3) div:nth-child(3) span:nth-child(2)');
                        if (videoCountElement) {
                            const currentCount = parseInt(videoCountElement.textContent) || 0;
                            videoCountElement.textContent = currentCount + 1;
                        }
                    } else {
                        Swal.fire({
                            title: 'Error',
                            text: 'Failed to save video: ' + data.error,
                            icon: 'error'
                        });
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    Swal.fire({
                        title: 'Error',
                        text: 'Failed to save video',
                        icon: 'error'
                    });
                });
            });
        }

        // Initialize Notepad
        function initNotepad() {
            const notepadText = document.getElementById('notepadText');

            document.getElementById('saveNote').addEventListener('click', () => {
                const note = notepadText.value;
                if (note.trim()) {
                    fetch('/save_note', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ 
                            username: '{{ user_data.username }}',
                            content: note,
                            save_only: true
                        }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            Swal.fire({
                                title: 'Note Saved!',
                                text: 'Your note has been saved.',
                                icon: 'success'
                            });
                        } else {
                            Swal.fire({
                                title: 'Error',
                                text: 'Failed to save note: ' + data.error,
                                icon: 'error'
                            });
                        }
                    });
                } else {
                    Swal.fire({
                        title: 'Empty Note',
                        text: 'Please write something before saving!',
                        icon: 'warning'
                    });
                }
            });

            document.getElementById('clearNote').addEventListener('click', () => {
                Swal.fire({
                    title: 'Clear Note?',
                    text: 'Are you sure you want to clear your note?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, clear it!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        notepadText.value = '';
                    }
                });
            });

            document.getElementById('submitNote').addEventListener('click', () => {
                const note = notepadText.value;
                if (note.trim()) {
                    const points = Math.min(Math.floor(note.length / 10), 100);
                    
                    fetch('/save_note', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ 
                            username: '{{ user_data.username }}',
                            content: note,
                            points: points
                        }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            Swal.fire({
                                title: 'Note Submitted!',
                                text: `You've earned ${points} points!`,
                                icon: 'success'
                            });
                            updatePoints(points);
                            
                            // Update the writing count display
                            const writingCountElement = document.querySelector('.dashboard-card div:nth-child(3) div:nth-child(3) span:nth-child(2)');
                            if (writingCountElement) {
                                const currentCount = parseInt(writingCountElement.textContent) || 0;
                                writingCountElement.textContent = currentCount + 1;
                            }
                        } else {
                            Swal.fire({
                                title: 'Error',
                                text: 'Failed to submit note: ' + data.error,
                                icon: 'error'
                            });
                        }
                    });
                } else {
                    Swal.fire({
                        title: 'Empty Note',
                        text: 'Please write something before submitting!',
                        icon: 'warning'
                    });
                }
            });
        }

        // Update points display and progress bar
        function updatePoints(points) {
            // Update the local total
            totalPoints += points;
            
            // Update the display
            document.getElementById('totalPoints').textContent = `Total Points: ${totalPoints}`;
            
            // Update the progress bar
            const progress = (totalPoints % 1000) / 10;
            const progressBar = document.querySelector('.progress-bar');
            progressBar.style.width = `${progress}%`;
            
            // Add gradient based on progress
            if (progress < 30) {
                progressBar.style.background = 'linear-gradient(90deg, #ff6584 0%, #fbbf24 100%)';
            } else if (progress < 70) {
                progressBar.style.background = 'linear-gradient(90deg, #fbbf24 0%, #42b0ff 100%)';
            } else {
                progressBar.style.background = 'linear-gradient(90deg, #42b0ff 0%, #6c63ff 100%)';
            }
            
            // Check for new badges
            checkBadges();
        }

        // Check for new badges based on points
        function checkBadges() {
            const badgeList = document.getElementById('badgeList');
            let newBadges = [];
            
            if (totalPoints >= 100 && !badges.includes("First Drawing")) {
                newBadges.push("First Drawing");
                badges.push("First Drawing");
            }
            if (totalPoints >= 500 && !badges.includes("Master Artist")) {
                newBadges.push("Master Artist");
                badges.push("Master Artist");
            }
            if (totalPoints >= 1000 && !badges.includes("Creative Guru")) {
                newBadges.push("Creative Guru");
                badges.push("Creative Guru");
            }
            
            // Update badge display
            badgeList.innerHTML = badges.map(badge => `
                <div class="badge-item">
                    <i class="fas fa-award"></i>
                    ${badge}
                </div>
            `).join('');
            
            // Show notifications for new badges
            newBadges.forEach(badge => {
                showBadgeNotification(badge);
            });
        }

        // Show badge notification
        function showBadgeNotification(badgeName) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'position-fixed bottom-0 end-0 p-3';
            notification.style.zIndex = '11';
            
            notification.innerHTML = `
                <div id="badgeToast" class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-primary text-white">
                        <strong class="me-auto">New Badge Unlocked!</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body bg-light">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-award text-warning me-3" style="font-size: 2rem;"></i>
                            <div>
                                <h6 class="mb-1">${badgeName}</h6>
                                <p class="mb-0">Congratulations! You've earned a new badge.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Initialize all components when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initDrawingBoard();
            initVoiceRecording();
            initVideoRecording();
            initNotepad();
            
            // Initialize tooltips
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
            
            // Show welcome message
            setTimeout(() => {
                Swal.fire({
                    title: `Welcome, {{ user_data.username }}!`,
                    text: 'Ready to unleash your creativity?',
                    icon: 'info',
                    confirmButtonText: 'Let\'s go!'
                });
            }, 1000);
        });
    </script>
    
    <!-- SweetAlert for beautiful alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</body>

</html>